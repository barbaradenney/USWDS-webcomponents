#!/usr/bin/env sh
# USWDS Integration Pre-commit Validation

echo "ğŸ” Validating USWDS Integration Configuration..."

# Validate Vite configuration
node scripts/validate-vite-uswds-config.js || {
  echo "âŒ USWDS Vite configuration validation failed"
  echo "ğŸ’¡ This prevents regression of the Storybook USWDS module loading solution"
  echo "ğŸ’¡ Check .storybook/main.ts, vite.config.ts, and .storybook/preview-head.html"
  exit 1
}

# Run USWDS integration tests
npm run test -- __tests__/storybook-uswds-integration.test.ts || {
  echo "âŒ USWDS integration tests failed"
  echo "ğŸ’¡ This prevents breaking the Storybook USWDS module loading solution"
  exit 1
}

echo "âœ… USWDS Integration validation passed"